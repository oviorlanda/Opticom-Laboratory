<!-- ============================================ -->
<!-- FORM KOMPLAIN NILAI PAGE - COMPACT VERSION -->
<!-- Halaman untuk mengajukan keluhan terkait nilai -->
<!-- ============================================ -->

<!-- Page Header -->
<div class="page-header">
    <!-- Animated Background Shapes -->
    <div class="hero-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
    </div>
    
    <div class="container">
        <h2 class="section-title">Form Komplain Nilai</h2>
        <div class="breadcrumb">
            <a href="#" class="breadcrumb-link" data-page="about">Home</a> > Komplain Nilai
        </div>
    </div>
</div>

<!-- Form Content -->
<div class="container form-komplain-container">
    
    <!-- Form Introduction -->
    <div class="form-intro">
        <p>Silakan isi form berikut untuk menyampaikan komplain terkait nilai praktikum Anda.</p>
    </div>

    <!-- Complaint Form -->
    <form id="complaint-form" class="complaint-form">
        
        <!-- Nama Lengkap -->
        <div class="form-group">
            <label for="nama">
                Nama Lengkap <span class="required">*</span>
            </label>
            <input 
                type="text" 
                id="nama" 
                name="nama" 
                placeholder="Contoh: Budi Itu Saya"
                required
                class="form-input">
        </div>

        <!-- NIM -->
        <div class="form-group">
            <label for="nim">
                NIM <span class="required">*</span>
            </label>
            <input 
                type="text" 
                id="nim" 
                name="nim" 
                placeholder="Contoh: 1102213xxxx"
                required
                pattern="[0-9]{10,13}"
                class="form-input">
        </div>

        <!-- Nomor Kontak -->
        <div class="form-group">
            <label for="kontak">
                Nomor Kontak <span class="required">*</span>
            </label>
            <input 
                type="tel" 
                id="kontak" 
                name="kontak" 
                placeholder="Contoh: 081234567890"
                required
                pattern="[0-9]{10,13}"
                class="form-input">
        </div>

        <!-- Jurusan -->
        <div class="form-group">
            <label for="jurusan">
                Jurusan <span class="required">*</span>
            </label>
            <input 
                type="text" 
                id="jurusan" 
                name="jurusan" 
                placeholder="Contoh: S1 Teknik Elektro"
                required
                class="form-input">
        </div>

        <!-- Kelas -->
        <div class="form-group">
            <label for="kelas">
                Kelas <span class="required">*</span>
            </label>
            <input 
                type="text" 
                id="kelas" 
                name="kelas" 
                placeholder="Contoh: EL-46-05"
                required
                class="form-input">
        </div>

        <!-- Kelompok -->
        <div class="form-group">
            <label for="kelompok">
                Kelompok <span class="required">*</span>
            </label>
            <input 
                type="text" 
                id="kelompok" 
                name="kelompok" 
                placeholder="Contoh: A, B, C, dst"
                required
                class="form-input">
        </div>

        <!-- Hari Praktikum / Shift -->
        <div class="form-group">
            <label for="shift">
                Hari Praktikum / Shift <span class="required">*</span>
            </label>
            <input 
                type="text" 
                id="shift" 
                name="shift" 
                placeholder="Contoh: Senin/3"
                required
                class="form-input">
        </div>

        <!-- Jenis Masalah -->
        <div class="form-group">
            <label for="jenis-masalah">
                Jenis Masalah <span class="required">*</span>
            </label>
            <select 
                id="jenis-masalah" 
                name="jenis-masalah" 
                required
                class="form-select">
                <option value="">Pilih Masalah</option>
                <option value="Nilai Tugas Pendahuluan">Nilai Tugas Pendahuluan</option>
                <option value="Nilai Jurnal">Nilai Jurnal</option>
                <option value="Nilai Akhir">Nilai Akhir</option>
                <option value="Nilai Responsi">Nilai Responsi</option>
                <option value="Kehadiran">Kehadiran</option>
                <option value="Lainnya">Lainnya</option>
            </select>
        </div>

        <!-- Detail Komplain -->
        <div class="form-group">
            <label for="detail">
                Detail Komplain <span class="required">*</span>
            </label>
            <textarea 
                id="detail" 
                name="detail" 
                rows="4"
                placeholder="Jelaskan secara detail komplain Anda terkait nilai..."
                required
                class="form-textarea"></textarea>
        </div>

        <!-- Submit Button -->
        <button type="submit" id="submit-btn" class="btn-submit">
            Kirim Komplain
        </button>

        <!-- Success Message (Hidden by default) -->
        <div id="success-message" class="message-box success-message">
            <strong>‚úÖ Berhasil!</strong> Komplain Anda telah dikirim. Tim kami akan segera menindaklanjuti.
        </div>

        <!-- Error Message (Hidden by default) -->
        <div id="error-message" class="message-box error-message">
            <strong>‚ùå Gagal!</strong> Terjadi kesalahan. Silakan coba lagi.
        </div>

    </form>

    <!-- Important Notes -->
    <div class="important-notes">
        <h4>üìå Catatan Penting:</h4>
        <ul>
            <li>Pastikan semua data yang Anda masukkan sudah benar</li>
            <li>Komplain akan diproses maksimal 3x24 jam kerja</li>
            <li>Anda akan dihubungi melalui nomor kontak yang didaftarkan</li>
            <li>Untuk komplain urgent, hubungi asisten praktikum langsung</li>
        </ul>
    </div>

</div>

<!-- Styles -->
<style>
/* ============================================ */
/* MAIN CONTAINER */
/* ============================================ */
.form-komplain-container {
    padding: 32px 20px;
    max-width: 550px;
    margin: 0 auto;
}

/* ============================================ */
/* FORM INTRODUCTION */
/* ============================================ */
.form-intro {
    background: #f8f9ff;
    border-left: 3px solid #2563eb;
    padding: 12px 16px;
    margin-bottom: 24px;
    border-radius: 6px;
}

.form-intro p {
    color: #475569;
    font-size: 0.85rem;
    line-height: 1.5;
    margin: 0;
}

/* ============================================ */
/* COMPLAINT FORM */
/* ============================================ */
.complaint-form {
    background: white;
    padding: 24px;
    border-radius: 12px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
}

/* Form Group */
.form-group {
    margin-bottom: 16px;
}

/* Form Labels */
.form-group label {
    display: block;
    font-weight: 600;
    color: #1e293b;
    margin-bottom: 6px;
    font-size: 0.85rem;
}

.required {
    color: #ef4444;
}

/* Form Inputs */
.form-input,
.form-select,
.form-textarea {
    width: 100%;
    padding: 10px 14px;
    border: 1.5px solid #e2e8f0;
    border-radius: 6px;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    outline: none;
}

.form-select {
    background: white;
    cursor: pointer;
}

.form-textarea {
    resize: vertical;
    font-family: inherit;
}

/* Input Focus State */
.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Input Invalid State */
.form-input:invalid:not(:placeholder-shown),
.form-select:invalid:not(:placeholder-shown),
.form-textarea:invalid:not(:placeholder-shown) {
    border-color: #ef4444;
}

/* ============================================ */
/* SUBMIT BUTTON */
/* ============================================ */
.btn-submit {
    width: 100%;
    padding: 12px;
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 3px 10px rgba(37, 99, 235, 0.3);
}

.btn-submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(37, 99, 235, 0.4);
}

.btn-submit:active {
    transform: translateY(0);
}

/* Loading State */
.btn-submit.loading {
    background: #94a3b8;
    cursor: not-allowed;
    pointer-events: none;
}

/* ============================================ */
/* MESSAGE BOXES */
/* ============================================ */
.message-box {
    display: none;
    margin-top: 16px;
    padding: 12px 14px;
    border-radius: 6px;
    font-size: 0.85rem;
}

.success-message {
    background: #dcfce7;
    border: 1.5px solid #22c55e;
    color: #166534;
}

.error-message {
    background: #fee2e2;
    border: 1.5px solid #ef4444;
    color: #991b1b;
}

/* ============================================ */
/* IMPORTANT NOTES */
/* ============================================ */
.important-notes {
    margin-top: 24px;
    padding: 16px 18px;
    background: #fffbeb;
    border-left: 3px solid #f59e0b;
    border-radius: 6px;
}

.important-notes h4 {
    color: #92400e;
    margin-bottom: 10px;
    font-size: 0.9rem;
    font-weight: 600;
}

.important-notes ul {
    color: #78350f;
    font-size: 0.8rem;
    line-height: 1.6;
    margin: 0;
    padding-left: 18px;
}

.important-notes li {
    margin-bottom: 4px;
}

.important-notes li:last-child {
    margin-bottom: 0;
}

/* ============================================ */
/* RESPONSIVE DESIGN */
/* ============================================ */

/* Mobile */
@media (max-width: 768px) {
    .form-komplain-container {
        padding: 24px 16px !important;
    }
    
    .complaint-form {
        padding: 20px !important;
    }
    
    .form-group {
        margin-bottom: 14px !important;
    }
    
    .form-input,
    .form-select,
    .form-textarea {
        padding: 9px 12px !important;
        font-size: 0.85rem !important;
    }
    
    .form-group label {
        font-size: 0.8rem !important;
        margin-bottom: 5px !important;
    }
    
    .btn-submit {
        padding: 11px !important;
        font-size: 0.9rem !important;
    }
}

/* Small Mobile */
@media (max-width: 480px) {
    .form-komplain-container {
        padding: 20px 14px !important;
    }
    
    .complaint-form {
        padding: 18px !important;
    }
}
</style>

<!-- JavaScript -->
<script>
console.log('üìã Complaint Form loaded (Compact Version)');

// Initialize form on DOM ready
document.addEventListener('DOMContentLoaded', function() {
    initComplaintForm();
});

// Initialize complaint form
function initComplaintForm() {
    const form = document.getElementById('complaint-form');
    
    if (!form) {
        console.warn('Complaint form not found');
        return;
    }
    
    // Setup form submission
    form.addEventListener('submit', handleFormSubmit);
    
    // Setup real-time validation
    setupRealtimeValidation();
    
    // Setup number-only inputs
    setupNumberOnlyInputs();
    
    console.log('‚úÖ Complaint form handlers initialized');
}

// Handle form submission
async function handleFormSubmit(e) {
    e.preventDefault();
    
    const submitBtn = document.getElementById('submit-btn');
    const successMsg = document.getElementById('success-message');
    const errorMsg = document.getElementById('error-message');
    
    // Hide previous messages
    successMsg.style.display = 'none';
    errorMsg.style.display = 'none';
    
    // Show loading state
    submitBtn.textContent = 'Mengirim...';
    submitBtn.classList.add('loading');
    
    // Get form data
    const formData = {
        nama: document.getElementById('nama').value,
        nim: document.getElementById('nim').value,
        kontak: document.getElementById('kontak').value,
        jurusan: document.getElementById('jurusan').value,
        kelas: document.getElementById('kelas').value,
        kelompok: document.getElementById('kelompok').value,
        shift: document.getElementById('shift').value,
        jenisMasalah: document.getElementById('jenis-masalah').value,
        detail: document.getElementById('detail').value,
        timestamp: new Date().toISOString()
    };
    
    console.log('üì§ Sending complaint:', formData);
    
    // Simulate API call (replace with actual endpoint)
    try {
        // TODO: Replace with actual API endpoint
        // const response = await fetch('YOUR_API_ENDPOINT', {
        //     method: 'POST',
        //     headers: { 'Content-Type': 'application/json' },
        //     body: JSON.stringify(formData)
        // });
        
        // Simulate delay
        await new Promise(resolve => setTimeout(resolve, 1500));
        
        // Simulate success
        const success = true; // Replace with: response.ok
        
        if (success) {
            // Show success message
            successMsg.style.display = 'block';
            
            // Reset form
            document.getElementById('complaint-form').reset();
            
            // Scroll to success message
            successMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            console.log('‚úÖ Complaint sent successfully');
        } else {
            throw new Error('Submission failed');
        }
        
    } catch (error) {
        console.error('‚ùå Error sending complaint:', error);
        errorMsg.style.display = 'block';
        errorMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
    } finally {
        // Reset button
        submitBtn.textContent = 'Kirim Komplain';
        submitBtn.classList.remove('loading');
    }
}

// Setup real-time validation feedback
function setupRealtimeValidation() {
    const inputs = document.querySelectorAll('.form-input, .form-select, .form-textarea');
    
    inputs.forEach(input => {
        // On blur - validate field
        input.addEventListener('blur', function() {
            if (this.value && !this.checkValidity()) {
                this.style.borderColor = '#ef4444';
            } else if (this.value) {
                this.style.borderColor = '#22c55e';
            }
        });
        
        // On input - reset to default if valid
        input.addEventListener('input', function() {
            if (this.checkValidity()) {
                this.style.borderColor = '#e2e8f0';
            }
        });
    });
}

// Setup number-only inputs
function setupNumberOnlyInputs() {
    // NIM validation (only numbers)
    const nimInput = document.getElementById('nim');
    if (nimInput) {
        nimInput.addEventListener('input', function() {
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    }
    
    // Phone validation (only numbers)
    const kontakInput = document.getElementById('kontak');
    if (kontakInput) {
        kontakInput.addEventListener('input', function() {
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    }
}
</script>